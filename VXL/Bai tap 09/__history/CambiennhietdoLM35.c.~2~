# INCLUDE <16F887.H> 
# FUSES HS 
# USE DELAY (CLOCK = 20M)
# DEVICE ADC = 10 
# DEFINE LCD_ENABLE_PIN    PIN_E2
# DEFINE LCD_RW_PIN        PIN_E1
# DEFINE LCD_RS_PIN        PIN_E0
# DEFINE LCD_DATA4         PIN_D4
# DEFINE LCD_DATA5         PIN_D5
# DEFINE LCD_DATA6         PIN_D6
# DEFINE LCD_DATA7         PIN_D7
# INCLUDE <LCD.C>
UNSIGNED INT16 NHIETDO, CHU, ND1;

VOID HIENTHI_NHIETDO ()
{
   LCD_GOTOXY (4,1);
   PRINTF (LCD_PUTC, "D0 NHIET DO: %02U", CHU);
}
VOID HIENTHI_NHIETDODANGDO()
{
   LCD_GOTOXY (2,2);
   PRINTF (LCD_PUTC, "TEMP: %02U", NHIETDO);
}

VOID MAIN ()
{
   SET_TRIS_D (0);
   SET_TRIS_E (0);
   LCD_INIT ();
   HIENTHI_NHIETDO ();
   SETUP_ADC (ADC_CLOCK_DIV_2);
   SETUP_ADC_PORTS (SAN0|VSS - VDD);
LOOP:
   SET_ADC_CHANNEL (0);
   DELAY_MS (10);
   NHIETDO = READ_ADC () / 2046;
   HIENTHI_NHIETDODANGDO ();
   IF (NHIETDO > 35)
      LCD_GOTOXY (1,1);
      LCD_PUTC ("CANH BAO QUA NHIET");
      DELAY_MS (300);
      LCD_GOTOXY (1,1);
      LCD_PUTC ("                  ";
      DELAY_MS (300);
   LCD_GOTOXY (8,2);
   LCD_PUTC (0XDF);
}
   
   
