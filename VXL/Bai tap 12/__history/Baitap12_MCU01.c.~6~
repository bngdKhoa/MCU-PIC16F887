# INCLUDE <16F887.H>
# DEVICE ADC = 10
# FUSES HS
# USE DELAY (CLOCK = 20M)
# USE RS232 (BAUD = 9600, XMIT = PIN_C6, RCV = PIN_C7)

CONST UNSIGNED INT8 MA7DOAN [] = {0XC0, 0XF9, 0XA4, 0XB0, 0X99, 0X92, 0X82, 0XF8, 0X80, 0X90};
UNSIGNED INT16 ND;

VOID HIENTHI_LED7DOAN ()
{
   OUTPUT_B (MA7DOAN [ND/10]);
   OUTPUT_D (MA7DOAN [ND%10]);
}

VOID MAIN ()
{
   SET_TRIS_B (0);
   SET_TRIS_D (0);
   SET_TRIS_A (0XFF);
   
   SETUP_ADC (ADC_CLOCK_DIV_2);
   SETUP_ADC_PORTS (SAN0|VSS_VDD);
//!   SET_ADC_CHANNEL (0);
//!   DELAY_US (10);
   WHILE (TRUE)
   {
      SET_ADC_CHANNEL (0);
      //DELAY_US (10);
      ND = READ_ADC () / 2.046;
      HIENTHI_LED7DOAN ();
      PUTC (ND);
      DELAY_MS (10);
   }
}
